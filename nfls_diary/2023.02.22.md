### 挑战

> ![](./p59.png)
>
> $n=3,7,15$。

考虑 $3$ 的时候的一个最优解：当看到另外两个人相同的时候，就选择反色。那么只有 `000`、`111` 是非法的，`001` 和 `010` 和 `100` 依赖于 `000` 变为合法。实际上，我们就是在 hypercube 上，把点分成大小为 $n+1$ 的组，每组分别是一个菊花。

hybercube 支配集：给每一位分别权值为 $1\sim n$，对于每个数 $S$，求出 $\oplus_{x\in S}x$，取出所有等于 $0$ 的点，这就是一个支配集。

### 卡常数

> ![](./p60.png)

把数每 $k$ 个分一段，段内的是平凡的，段间的，变为问 $\max_{x<y}a_x+b_y$，这是有结合律的信息，线段树维护就好。$O(n\log^2 n)$。

